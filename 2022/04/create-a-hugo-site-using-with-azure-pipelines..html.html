<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.101.0"><meta name=description content><link rel=icon href=/images/favicon.png type=image/png><title>Create a Hugo site using With Azure Pipelines. :: Day in the Life of a Senior Site Reliability Engineer (SRE)</title><link href=/css/nucleus.css?1659816599 rel=stylesheet><link href=/css/fontawesome-all.min.css?1659816599 rel=stylesheet><link href=/css/hybrid.css?1659816599 rel=stylesheet><link href=/css/featherlight.min.css?1659816599 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1659816599 rel=stylesheet><link href=/css/auto-complete.css?1659816599 rel=stylesheet><link href=/css/atom-one-dark-reasonable.css?1659816599 rel=stylesheet><link href=/css/theme.css?1659816599 rel=stylesheet><link href=/css/hugo-theme.css?1659816599 rel=stylesheet><script src=/js/jquery-3.3.1.min.js?1659816599></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=/2022/04/create-a-hugo-site-using-with-azure-pipelines..html.html><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=/><svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="198pt" height="198pt" viewBox="0 0 198 198"><g transform="translate(0.000000,198.000000) scale(0.100000,-0.100000)" fill="#000" stroke="none"><path d="M330 1015V760h25c20 0 25-5 25-25v-25h635 635v255 255h-25c-20 0-25 5-25 25v25H965 330v-255zm1260 0V770H965 340v245 245h625 625v-245z"/><path d="M720 1040c0-82 3-1e2 15-1e2s15 18 15 1e2-3 1e2-15 1e2-15-18-15-1e2z"/><path d="M1120 1076c0-13-6-27-12-30-10-5-10-7 0-12 7-3 12-24 12-50 0-24 5-44 10-44 6 0 10 20 10 45 0 33 4 45 15 45 8 0 15 5 15 10 0 6-7 10-15 10-9 0-15 9-15 25 0 14-4 25-10 25-5 0-10-11-10-24z"/><path d="M470 1030c-9-18-7-23 19-38 45-25 40-38-14-32-15 1-17-1-9-10 6-6 24-10 40-8 40 4 46 43 9 60-30 14-28 34 5 30 14-2 20 0 16 7-12 19-55 12-66-9z"/><path d="M586 1034c-36-36-9-94 44-94 30 0 60 30 60 61 0 41-73 65-104 33zm69-39c0-25-4-30-24-30-32 0-49 28-31 50 7 9 23 15 34 13 16-2 21-10 21-33z"/><path d="M797 1032c-22-24-21-55 1-75 38-35 102-9 102 40 0 47-71 71-103 35zm72-19c12-23-4-53-29-53s-41 29-29 52 45 23 58 1z"/><path d="M920 1045c0-10 50-105 55-105s55 95 55 105c0 18-23-1-37-30l-17-36-18 36c-16 30-38 47-38 30z"/><path d="M1203 1024c-15-24-15-29-2-53 29-51 109-33 109 24 0 56-76 76-107 29zm78-10c17-21 0-49-32-49-24 0-36 23-25 51 7 19 40 18 57-2z"/><path d="M1350 968c0-45 4-78 10-78s10 13 10 28c0 26 3 28 30 24 56-8 93 54 54 92-10 11-31 16-60 14l-44-1v-79zm85 27c0-27-3-30-30-30-21 0-31 5-33 18-6 33 6 49 35 45 24-3 28-8 28-33z"/><path d="M1055 959c-10-15 3-25 16-12 7 7 7 13 1 17-6 3-14 1-17-5z"/></g></svg></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label>
<input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=/js/lunr.min.js?1659816599></script>
<script type=text/javascript src=/js/auto-complete.js?1659816599></script>
<script type=text/javascript>var baseurl="https://solov.top/"</script><script type=text/javascript src=/js/search.js?1659816599></script></div><div class=highlightable><ul class=topics><li data-nav-id=/posts.html title=Posts class="dd-item
parent"><a href=/posts.html><b>X. </b>Posts</a><ul><li data-nav-id=/posts/azure.html title=Azure class="dd-item
parent"><a href=/posts/azure.html>Azure</a><ul><li data-nav-id=/2022/04/create-a-hugo-site-using-with-azure-pipelines..html.html title="Create a Hugo site using With Azure Pipelines." class="dd-item active"><a href=/2022/04/create-a-hugo-site-using-with-azure-pipelines..html.html>Create a Hugo site using With Azure Pipelines.</a></li></ul></li></ul></li></ul><section id=footer><center><p>Built with <i class="fas fa-heart"></i></p></center><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div><div id=top-bar><div id=breadcrumbs itemscope itemtype=http://data-vocabulary.org/Breadcrumb><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i></a></span>
<span id=toc-menu><i class="fas fa-list-alt"></i></span>
<span class=links><a href=/>Index</a> > <a href=/posts.html>Posts</a> > <a href=/posts/azure.html>Azure</a> > Create a Hugo site using With Azure Pipelines.</span></div><div class=progress><div class=wrapper><nav id=TableOfContents><ul><li><a href=#goal-hosting-a-static-site-generated-using-hugo-on-azure>Goal: Hosting a static site generated using Hugo on Azure</a><ul><li><a href=#azure-storage-blob--static-web-sites>Azure Storage Blob & Static Web Sites</a></li><li><a href=#automated-hugo-releases-with-azure-pipelines>Automated Hugo Releases With Azure Pipelines</a></li><li><a href=#install-hugo>Install Hugo</a><ul><li><a href=#start-the-hugo-server>Start the Hugo server</a></li></ul></li></ul></li></ul></nav></div></div></div></div><div id=head-tags></div><div id=body-inner><h1>Create a Hugo site using With Azure Pipelines.</h1><h2 id=goal-hosting-a-static-site-generated-using-hugo-on-azure>Goal: Hosting a static site generated using Hugo on Azure</h2><p>The entire site and all supporting processes will host in the Microsoft Azure cloud with Azure DevOps.
In this post, I will explain how to host the site in Microsoft Azure. This assumes the example static files have already been built so you will see how it’s exposed to the world.</p><p>Let’s start with a high-level view of the current setup:</p><ol><li>AN example DNS points to Azure CDN.</li><li>Azure CDN serves up the files in the site from different edge nodes around the world.</li><li>If the CDN has the requested file in cache, it returns it to the caller.
If not - the CDN pulls the file from where the files are stored, in an Azure Storage Blob container.</li></ol><h3 id=azure-storage-blob--static-web-sites>Azure Storage Blob & Static Web Sites</h3><p>It&rsquo;s better to use Azure Storage Blob to store the file for a static site with no dynamic server-side component to store the files.
The static websites capability of Azure Storage Blobs serve as a web server.</p><p>After creating the Azure Storage Blob resource, select the Static website option in the navigation and flip the toggle to Enabled.
<img src=storage-account-static-website.png alt="Azure Storage Blob  - enable Static Web Sites"></p><p>Azure will generate a URL for you in the form of https://.z##.web.core.windows.net. It will also create a blob container $web where you can upload your files to.</p><p>At this point, you can upload your site there.
But we sill discuss the automated CI/CD way using Azure DevOps.</p><h3 id=automated-hugo-releases-with-azure-pipelines>Automated Hugo Releases With Azure Pipelines</h3><ul><li>Hugo site and its content are stored in an Azure DevOps repo.</li><li>Build & deploy the static site immediately when updating to the <code>main</code> branch.</li><li>Build & deploy only the <code>main</code> branch on a regular schedule every day:<br>I use Hugo’s publishDate front matter capability. Because Hugo is static, only content that has no publishDate set or where the publishDate is before the build time will be included. Therefore, each rebuild and deploy the site will give that CMS-like publish schedule.</li></ul><h3 id=install-hugo>Install Hugo</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>hugo new site quickstart
</span></span><span style=display:flex><span>cd quickstart
</span></span><span style=display:flex><span>git init
</span></span><span style=display:flex><span>git submodule add https://github.com/theNewDynamic/gohugo-theme-ananke.git themes/ananke
</span></span><span style=display:flex><span>echo theme <span style=color:#f92672>=</span> <span style=color:#ae81ff>\&#34;</span>ananke<span style=color:#ae81ff>\&#34;</span> &gt;&gt; config.toml
</span></span><span style=display:flex><span>hugo new posts/my-first-post.md
</span></span></code></pre></div><h4 id=start-the-hugo-server>Start the Hugo server</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>▶ hugo server -D
</span></span><span style=display:flex><span>Start building sites …
</span></span><span style=display:flex><span>hugo v0.96.0+extended darwin/amd64 BuildDate<span style=color:#f92672>=</span>unknown
</span></span><span style=display:flex><span>WARN 2022/04/03 23:25:47 .File.UniqueID on zero object. Wrap it in <span style=color:#66d9ef>if</span> or with: <span style=color:#f92672>{{</span> with .File <span style=color:#f92672>}}{{</span> .UniqueID <span style=color:#f92672>}}{{</span> end <span style=color:#f92672>}}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                   | EN
</span></span><span style=display:flex><span>-------------------+-----
</span></span><span style=display:flex><span>  Pages            | <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>  Paginator pages  |  <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  Non-page files   |  <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  Static files     | <span style=color:#ae81ff>75</span>
</span></span><span style=display:flex><span>  Processed images |  <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  Aliases          |  <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  Sitemaps         |  <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  Cleaned          |  <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Built in <span style=color:#ae81ff>39</span> ms
</span></span><span style=display:flex><span>Watching <span style=color:#66d9ef>for</span> changes in /Users/user/Documents/Git/<span style=color:#f92672>{</span>archetypes,content,data,layouts,static,themes<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>Watching <span style=color:#66d9ef>for</span> config changes in /Users/user/Documents/Git/config.toml
</span></span><span style=display:flex><span>Environment: <span style=color:#e6db74>&#34;development&#34;</span>
</span></span><span style=display:flex><span>Serving pages from memory
</span></span><span style=display:flex><span>Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender
</span></span><span style=display:flex><span>Web Server is available at http://localhost:1313/ <span style=color:#f92672>(</span>bind address 127.0.0.1<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Press Ctrl+C to stop
</span></span></code></pre></div><footer class=footline></footer></div></div><div id=navigation><a class="nav nav-prev" href=/posts/azure.html title=Azure><i class="fa fa-chevron-left"></i></a>
<a class="nav nav-next" href=/posts.html title=Posts style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=/js/clipboard.min.js?1659816599></script>
<script src=/js/perfect-scrollbar.min.js?1659816599></script>
<script src=/js/perfect-scrollbar.jquery.min.js?1659816599></script>
<script src=/js/jquery.sticky.js?1659816599></script>
<script src=/js/featherlight.min.js?1659816599></script>
<script src=/js/highlight.pack.js?1659816599></script>
<script>hljs.initHighlightingOnLoad()</script><script src=/js/modernizr.custom-3.6.0.js?1659816599></script>
<script src=/js/learn.js?1659816599></script>
<script src=/js/hugo-learn.js?1659816599></script>
<link href=/mermaid/mermaid.css?1659816599 rel=stylesheet><script src=/mermaid/mermaid.js?1659816599></script>
<script>mermaid.initialize({startOnLoad:!0})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-9RZJEKCGXX"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-9RZJEKCGXX")</script></body></html>