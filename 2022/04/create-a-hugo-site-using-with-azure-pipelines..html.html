<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Create a Hugo site using With Azure Pipelines. | Day in the Life of a Senior Site Reliability Engineer (SRE)</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Goal: Hosting a static site generated using Hugo on Azure The entire site and all supporting processes will host in the Microsoft Azure cloud with Azure DevOps. In this post, I will explain how to host the site in Microsoft Azure. This assumes the example static files have already been built so you will see how it’s exposed to the world.
Let’s start with a high-level view of the current setup:"><meta name=generator content="Hugo 0.101.0"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><meta property="og:title" content="Create a Hugo site using With Azure Pipelines."><meta property="og:description" content="Goal: Hosting a static site generated using Hugo on Azure The entire site and all supporting processes will host in the Microsoft Azure cloud with Azure DevOps. In this post, I will explain how to host the site in Microsoft Azure. This assumes the example static files have already been built so you will see how it’s exposed to the world.
Let’s start with a high-level view of the current setup:"><meta property="og:type" content="article"><meta property="og:url" content="https://solov.top/2022/04/create-a-hugo-site-using-with-azure-pipelines..html.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-03T23:17:09+03:00"><meta property="article:modified_time" content="2022-04-03T23:17:09+03:00"><meta itemprop=name content="Create a Hugo site using With Azure Pipelines."><meta itemprop=description content="Goal: Hosting a static site generated using Hugo on Azure The entire site and all supporting processes will host in the Microsoft Azure cloud with Azure DevOps. In this post, I will explain how to host the site in Microsoft Azure. This assumes the example static files have already been built so you will see how it’s exposed to the world.
Let’s start with a high-level view of the current setup:"><meta itemprop=datePublished content="2022-04-03T23:17:09+03:00"><meta itemprop=dateModified content="2022-04-03T23:17:09+03:00"><meta itemprop=wordCount content="467"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Create a Hugo site using With Azure Pipelines."><meta name=twitter:description content="Goal: Hosting a static site generated using Hugo on Azure The entire site and all supporting processes will host in the Microsoft Azure cloud with Azure DevOps. In this post, I will explain how to host the site in Microsoft Azure. This assumes the example static files have already been built so you will see how it’s exposed to the world.
Let’s start with a high-level view of the current setup:"></head><body class="ma0 avenir bg-near-white"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib">Day in the Life of a Senior Site Reliability Engineer (SRE)</a><div class="flex-l items-center"><div class=ananke-socials></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">AZURE</aside><div id=sharing class="mt3 ananke-socials"></div><h1 class="f1 athelas mt3 mb1">Create a Hugo site using With Azure Pipelines.</h1><time class="f6 mv4 dib tracked" datetime=2022-04-03T23:17:09+03:00>April 3, 2022</time></header><div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h2 id=goal-hosting-a-static-site-generated-using-hugo-on-azure>Goal: Hosting a static site generated using Hugo on Azure</h2><p>The entire site and all supporting processes will host in the Microsoft Azure cloud with Azure DevOps.
In this post, I will explain how to host the site in Microsoft Azure. This assumes the example static files have already been built so you will see how it’s exposed to the world.</p><p>Let’s start with a high-level view of the current setup:</p><ol><li>AN example DNS points to Azure CDN.</li><li>Azure CDN serves up the files in the site from different edge nodes around the world.</li><li>If the CDN has the requested file in cache, it returns it to the caller.
If not - the CDN pulls the file from where the files are stored, in an Azure Storage Blob container.</li></ol><h3 id=azure-storage-blob--static-web-sites>Azure Storage Blob & Static Web Sites</h3><p>It&rsquo;s better to use Azure Storage Blob to store the file for a static site with no dynamic server-side component to store the files.
The static websites capability of Azure Storage Blobs serve as a web server.</p><p>After creating the Azure Storage Blob resource, select the Static website option in the navigation and flip the toggle to Enabled.
<img src=storage-account-static-website.png alt="Azure Storage Blob  - enable Static Web Sites"></p><p>Azure will generate a URL for you in the form of https://.z##.web.core.windows.net. It will also create a blob container $web where you can upload your files to.</p><p>At this point, you can upload your site there.
But we sill discuss the automated CI/CD way using Azure DevOps.</p><h3 id=automated-hugo-releases-with-azure-pipelines>Automated Hugo Releases With Azure Pipelines</h3><ul><li>Hugo site and its content are stored in an Azure DevOps repo.</li><li>Build & deploy the static site immediately when updating to the <code>main</code> branch.</li><li>Build & deploy only the <code>main</code> branch on a regular schedule every day:<br>I use Hugo’s publishDate front matter capability. Because Hugo is static, only content that has no publishDate set or where the publishDate is before the build time will be included. Therefore, each rebuild and deploy the site will give that CMS-like publish schedule.</li></ul><h3 id=install-hugo>Install Hugo</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>hugo new site quickstart
</span></span><span style=display:flex><span>cd quickstart
</span></span><span style=display:flex><span>git init
</span></span><span style=display:flex><span>git submodule add https://github.com/theNewDynamic/gohugo-theme-ananke.git themes/ananke
</span></span><span style=display:flex><span>echo theme <span style=color:#f92672>=</span> <span style=color:#ae81ff>\&#34;</span>ananke<span style=color:#ae81ff>\&#34;</span> &gt;&gt; config.toml
</span></span><span style=display:flex><span>hugo new posts/my-first-post.md
</span></span></code></pre></div><h4 id=start-the-hugo-server>Start the Hugo server</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>▶ hugo server -D
</span></span><span style=display:flex><span>Start building sites …
</span></span><span style=display:flex><span>hugo v0.96.0+extended darwin/amd64 BuildDate<span style=color:#f92672>=</span>unknown
</span></span><span style=display:flex><span>WARN 2022/04/03 23:25:47 .File.UniqueID on zero object. Wrap it in <span style=color:#66d9ef>if</span> or with: <span style=color:#f92672>{{</span> with .File <span style=color:#f92672>}}{{</span> .UniqueID <span style=color:#f92672>}}{{</span> end <span style=color:#f92672>}}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                   | EN
</span></span><span style=display:flex><span>-------------------+-----
</span></span><span style=display:flex><span>  Pages            | <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>  Paginator pages  |  <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  Non-page files   |  <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  Static files     | <span style=color:#ae81ff>75</span>
</span></span><span style=display:flex><span>  Processed images |  <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  Aliases          |  <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>  Sitemaps         |  <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  Cleaned          |  <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Built in <span style=color:#ae81ff>39</span> ms
</span></span><span style=display:flex><span>Watching <span style=color:#66d9ef>for</span> changes in /Users/user/Documents/Git/<span style=color:#f92672>{</span>archetypes,content,data,layouts,static,themes<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>Watching <span style=color:#66d9ef>for</span> config changes in /Users/user/Documents/Git/config.toml
</span></span><span style=display:flex><span>Environment: <span style=color:#e6db74>&#34;development&#34;</span>
</span></span><span style=display:flex><span>Serving pages from memory
</span></span><span style=display:flex><span>Running in Fast Render Mode. For full rebuilds on change: hugo server --disableFastRender
</span></span><span style=display:flex><span>Web Server is available at http://localhost:1313/ <span style=color:#f92672>(</span>bind address 127.0.0.1<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Press Ctrl+C to stop
</span></span></code></pre></div><ul class=pa0></ul><div class="mt6 instapaper_ignoref"></div></div><aside class="w-30-l mt6-l"></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://solov.top/>&copy; Day in the Life of a Senior Site Reliability Engineer (SRE) 2022</a><div><div class=ananke-socials></div></div></div></footer></body></html>